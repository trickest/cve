### [CVE-2024-26880](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-26880)
![](https://img.shields.io/static/v1?label=Product&message=Linux&color=blue)
![](https://img.shields.io/static/v1?label=Version&message=&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=3.19%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Version&message=ffcc39364160663cda1a3c358f4537302a92459b%20&color=brightgreen)
![](https://img.shields.io/static/v1?label=Vulnerability&message=n%2Fa&color=blue)

### Description

In the Linux kernel, the following vulnerability has been resolved:dm: call the resume method on internal suspendThere is this reported crash when experimenting with the lvm2 testsuite.The list corruption is caused by the fact that the postsuspend and resumemethods were not paired correctly; there were two consecutive calls to theorigin_postsuspend function. The second call attempts to remove the"hash_list" entry from a list, while it was already removed by the firstcall.Fix __dm_internal_resume so that it calls the preresume and resumemethods of the table's targets.If a preresume method of some target fails, we are in a tricky situation.We can't return an error because dm_internal_resume isn't supposed toreturn errors. We can't return success, because then the "resume" and"postsuspend" methods would not be paired correctly. So, we set theDMF_SUSPENDED flag and we fake normal suspend - it may confuse userspacetools, but it won't cause a kernel crash.------------[ cut here ]------------kernel BUG at lib/list_debug.c:56!invalid opcode: 0000 [#1] PREEMPT SMPCPU: 1 PID: 8343 Comm: dmsetup Not tainted 6.8.0-rc6 #4Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.14.0-2 04/01/2014RIP: 0010:__list_del_entry_valid_or_report+0x77/0xc0<snip>RSP: 0018:ffff8881b831bcc0 EFLAGS: 00010282RAX: 000000000000004e RBX: ffff888143b6eb80 RCX: 0000000000000000RDX: 0000000000000001 RSI: ffffffff819053d0 RDI: 00000000ffffffffRBP: ffff8881b83a3400 R08: 00000000fffeffff R09: 0000000000000058R10: 0000000000000000 R11: ffffffff81a24080 R12: 0000000000000001R13: ffff88814538e000 R14: ffff888143bc6dc0 R15: ffffffffa02e4bb0FS:  00000000f7c0f780(0000) GS:ffff8893f0a40000(0000) knlGS:0000000000000000CS:  0010 DS: 002b ES: 002b CR0: 0000000080050033CR2: 0000000057fb5000 CR3: 0000000143474000 CR4: 00000000000006b0Call Trace: <TASK> ? die+0x2d/0x80 ? do_trap+0xeb/0xf0 ? __list_del_entry_valid_or_report+0x77/0xc0 ? do_error_trap+0x60/0x80 ? __list_del_entry_valid_or_report+0x77/0xc0 ? exc_invalid_op+0x49/0x60 ? __list_del_entry_valid_or_report+0x77/0xc0 ? asm_exc_invalid_op+0x16/0x20 ? table_deps+0x1b0/0x1b0 [dm_mod] ? __list_del_entry_valid_or_report+0x77/0xc0 origin_postsuspend+0x1a/0x50 [dm_snapshot] dm_table_postsuspend_targets+0x34/0x50 [dm_mod] dm_suspend+0xd8/0xf0 [dm_mod] dev_suspend+0x1f2/0x2f0 [dm_mod] ? table_deps+0x1b0/0x1b0 [dm_mod] ctl_ioctl+0x300/0x5f0 [dm_mod] dm_compat_ctl_ioctl+0x7/0x10 [dm_mod] __x64_compat_sys_ioctl+0x104/0x170 do_syscall_64+0x184/0x1b0 entry_SYSCALL_64_after_hwframe+0x46/0x4eRIP: 0033:0xf7e6aead<snip>---[ end trace 0000000000000000 ]---

### POC

#### Reference
No PoCs from references.

#### Github
- https://github.com/fkie-cad/nvd-json-data-feeds

